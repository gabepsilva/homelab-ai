# This file is managed by Ansible - manual changes will be overwritten
# SSH Server Configuration File
# See sshd_config(5) for details

# Basic configuration
Port 22
Protocol 2
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key

# Logging
SyslogFacility AUTH
LogLevel INFO

# Authentication:
LoginGraceTime 120
PermitRootLogin no
StrictModes yes

# Only use SSH keys - password authentication disabled
PubkeyAuthentication yes
PasswordAuthentication no
PermitEmptyPasswords no
ChallengeResponseAuthentication no
UsePAM yes

# Disable X11 forwarding for security
X11Forwarding no

# Timeout settings
ClientAliveInterval 300
ClientAliveCountMax 2
TCPKeepAlive yes

# Display last login information
PrintLastLog yes

# Allow client to pass locale environment variables
AcceptEnv LANG LC_*

# Override settings for specific users if needed
Match User ubuntu
  PasswordAuthentication no
  PubkeyAuthentication yes 